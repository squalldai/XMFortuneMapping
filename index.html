<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åŠ å¯†è§£å¯†å·¥å…· v1.8.0</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f0f2f5;
  margin: 0;
  padding: 0;
  text-align: center;
}

header {
  background: linear-gradient(135deg,#ffecd2,#fcb69f);
  height: 13vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.9rem;
  font-weight:bold;
  color:#333;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

.container {
  max-width:480px;
  margin:10px auto;
  padding:12px;
  background:#fff;
  border-radius:16px;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

.info-module {
  background: rgba(240,240,240,0.8);
  border-radius: 12px;
  padding: 10px;
  text-align: left;
  font-size:0.82rem;
  font-style: italic;
  color: #333;
  max-height: 4.2em;
  overflow: hidden;
  position: relative;
  transition: max-height 0.5s ease;
  margin-bottom: 12px;
}
.info-module.expanded { max-height: 500px; }
.toggle-arrow {
  display:block;
  text-align:center;
  cursor:pointer;
  font-weight:bold;
  margin-top:4px;
  user-select:none;
}

h2 {
  margin:10px 0;
  font-size:1.1rem;
  color:#444;
}

.radio-group {
  margin:10px 0;
  display:flex;
  justify-content:center;
  gap:12px;
}

label {
  font-size:0.88rem;
}

.io-block {
  margin:8px 0;
  text-align:left;
  border-radius:8px;
  padding:4px;
  transition: background 0.5s;
}

.io-label {
  display:block;
  margin-bottom:4px;
  font-size:0.85rem;
  font-weight:bold;
  color:#555;
}

.input-row {
  display:flex;
  align-items:center;
  gap:4px;
}

.prefix-input {
  width:85px;
  padding:5px;
  border:1px solid #ccc;
  border-radius:6px;
  font-size:0.85rem;
}

input[type="text"] {
  flex:1;
  padding:6px;
  border:1px solid #ccc;
  border-radius:6px;
  font-size:0.95rem;
  text-align:center;
  transition: background 0.5s;
}

.button-calc {
  width:180px;
  padding:10px 0;
  border:none;
  border-radius:12px;
  font-size:1rem;
  cursor:pointer;
  margin:16px 0;
  transition:all 0.2s, background 0.5s;
  color:white;
}

#log {
  margin-top:12px;
  text-align:left;
  font-size:0.82rem;
  max-height:200px;
  overflow-y:auto;
  border-top:1px solid #ddd;
  padding-top:8px;
}

.flash-encrypt { background-color: rgba(76,175,239,0.3); }
.flash-decrypt { background-color: rgba(255,112,67,0.3); }
</style>
</head>
<body>
<header>åæ·»é¦™ç²¾ç¼–å·åŠ å¯†è§£å¯†å·¥å…· v1.8.0</header>
<div class="container">

<!-- è¯´æ˜æ¨¡å— -->
<div id="infoModule" class="info-module">
  <div id="infoContent">
    å½“å‰ä»…æ”¯æŒ <strong>ADM æ¨¡å¼</strong>ã€‚<br>
    å·¦è¾“å…¥ 8 ä½æ•°å­—ï¼Œå‰å››ä½å›ºå®š 7688ï¼Œå³è¾“å…¥ 4 ä½æ•°å­—ï¼ˆåŠ å¯†ï¼‰æˆ– 6 ä½æ•°å­—+å­—æ¯ï¼ˆè§£å¯†ï¼‰ã€‚<br>
    ç‚¹å‡» <strong>è®¡ç®—</strong> å®ŒæˆåŠ è§£å¯†ï¼Œè¾“å‡ºå·¦ä¾§ HT-ï¼ˆåŠ å¯†ï¼‰æˆ– 7688 å¼€å¤´æ•°å­—ï¼ˆè§£å¯†ï¼‰ï¼Œå³ä¾§æ˜¾ç¤ºç»“æœã€‚<br>
    è¾“å…¥å¿…é¡»ç¬¦åˆæ ¼å¼ï¼Œå…¶ä»–æ¨¡å¼æš‚ä¸å¯ç”¨ã€‚<br>
    <span id="moreText" style="display:none;">æ›´å¤šè¯´æ˜å†…å®¹å¯åœ¨è¿™é‡Œæ·»åŠ ï¼Œå¦‚é™åˆ¶ã€æ³¨æ„äº‹é¡¹æˆ–ä½¿ç”¨æç¤ºç­‰ã€‚</span>
  </div>
  <div id="toggleArrow" class="toggle-arrow">â–¼</div>
</div>

<h2>è¯·é€‰æ‹©æ¨¡å¼</h2>
<div class="radio-group">
  <label><input type="radio" name="mode" value="ADM" checked> ADM</label>
  <label style="color: gray;"><input type="radio" name="mode" value="å¾·ä¹‹é¦¨" disabled> å¾·ä¹‹é¦¨(å¼€å‘ä¸­)</label>
</div>

<h2>è¯·é€‰æ‹©æ“ä½œ</h2>
<div class="radio-group">
  <label><input type="radio" name="operation" value="encrypt" checked> åŠ å¯†</label>
  <label><input type="radio" name="operation" value="decrypt"> è§£å¯†</label>
</div>

<!-- è®¡ç®—å®¹å™¨ -->
<div class="calc-container" id="calcContainer">
  <div class="io-block" id="inputBlock">
    <span class="io-label">è¾“å…¥</span>
    <div class="input-row">
      <input type="text" id="prefixInput" class="prefix-input" value="76880800">
      <input type="text" id="mainInput" maxlength="4" placeholder="è¾“å…¥4ä½æ•°å­—">
    </div>
  </div>

  <button class="button-calc" id="calcBtn" onclick="calculate()">ğŸ”’ è®¡ç®—</button>

  <div class="io-block" id="outputBlock">
    <span class="io-label">ç»“æœ</span>
    <div class="input-row">
      <input type="text" id="prefixOutput" class="prefix-input" value="HT-" readonly>
      <input type="text" id="output" readonly>
    </div>
  </div>
</div>

<div id="log"></div>
</div>

<script>
const chars='23456789ABCDEFGHJKLMNPRSTUVWXYZ';
const key='ht1416';

function encrypt8to6(num8,key){
  let val=parseInt(num8,10);
  let out='';
  for(let i=0;i<6;i++){
    out=chars[val%chars.length]+out;
    val=Math.floor(val/chars.length);
  }
  return out;
}

function decrypt6to8(str6,key){
  let val=0;
  for(let i=0;i<6;i++){
    val=val*chars.length+chars.indexOf(str6[i]);
  }
  return val.toString().padStart(8,'0');
}

function updateButtonStyle(){
  const op=document.querySelector('input[name="operation"]:checked').value;
  const btn=document.getElementById('calcBtn');
  if(op==='encrypt'){ btn.textContent='ğŸ”’ è®¡ç®—'; btn.style.background='#4cafef';}
  else{ btn.textContent='ğŸ”“ è®¡ç®—'; btn.style.background='#ff7043';}
}

function flashModule(){
  const container=document.getElementById('calcContainer');
  const op=document.querySelector('input[name="operation"]:checked').value;
  const cls=op==='encrypt'?'flash-encrypt':'flash-decrypt';
  container.classList.add(cls);
  setTimeout(()=>{
    container.classList.remove(cls);
    container.style.backgroundColor=op==='encrypt'?'rgba(76,175,239,0.1)':'rgba(255,112,67,0.1)';
  },500);
}

function calculate(){
  flashModule();
  updateButtonStyle();
  const mode=document.querySelector('input[name="mode"]:checked').value;
  const operation=document.querySelector('input[name="operation"]:checked').value;
  let left=document.getElementById("prefixInput").value.trim();
  let right=document.getElementById("mainInput").value.trim();
  let outLeft=document.getElementById("prefixOutput");
  let outRight=document.getElementById("output");

  if(operation==='encrypt'){
    if(!/^\d{8}$/.test(left)||!left.startsWith('7688')){ alert('å·¦è¾“å…¥å¿…é¡»8ä½æ•°å­—ä¸”ä»¥7688å¼€å¤´'); return;}
    if(!/^\d{4}$/.test(right)){ alert('å³è¾“å…¥å¿…é¡»4ä½æ•°å­—'); return;}
    const input8=left.slice(4)+right;
    const result=encrypt8to6(input8,key);
    outLeft.value='HT-';
    outRight.value=result;
    logOperation(mode,operation,left+'+'+right,'HT-'+result);
  }else{
    if(left!=='HT-'){ alert('å·¦è¾“å…¥å¿…é¡»ä¸ºHT-'); return;}
    if(!/^[0-9A-Z]{6}$/.test(right)){ alert('å³è¾“å…¥å¿…é¡»6ä½æ•°å­—+å¤§å†™å­—æ¯'); return;}
    const dec=decrypt6to8(right,key);
    outLeft.value='7688'+dec.slice(0,4);
    outRight.value=dec.slice(4);
    logOperation(mode,operation,left+right,outLeft.value+outRight.value);
  }
}

function logOperation(mode,op,input,output){
  const log=document.getElementById("log");
  const time=new Date().toLocaleTimeString();
  log.innerHTML=`<div>[${time}] æ¨¡å¼:${mode} æ“ä½œ:${op} è¾“å…¥:${input} â†’ è¾“å‡º:${output}</div>`+log.innerHTML;
}

document.querySelectorAll('input[name="operation"]').forEach(radio=>{
  radio.addEventListener('change',()=>{
    document.getElementById('mainInput').value='';
    document.getElementById('output').value='';
    document.getElementById('calcContainer').style.backgroundColor='transparent';
    const op=document.querySelector('input[name="operation"]:checked').value;
    if(op==='decrypt'){
      document.getElementById('prefixInput').value='HT-';
      document.getElementById('mainInput').placeholder='è¾“å…¥6ä½æ•°å­—æˆ–å¤§å†™å­—æ¯';
      document.getElementById('mainInput').maxLength=6;
      document.getElementById('prefixOutput').value='';
    }else{
      document.getElementById('prefixInput').value='76880800';
      document.getElementById('mainInput').placeholder='è¾“å…¥4ä½æ•°å­—';
      document.getElementById('mainInput').maxLength=4;
      document.getElementById('prefixOutput').value='HT-';
    }
    updateButtonStyle();
  });
});

// å…¼å®¹è¯´æ˜æ¨¡å—æŠ˜å 
const infoModule
